<!DOCTYPE html>
<html>

<head>
  <title>Face-api.js Demo</title>
  <script defer src="face-api.js"></script>
  <script defer src="FileSaver.js"></script>
  <script defer src="commons.js"></script>
  <style>
    body {
      margin: 50px;
      padding: 0;
      padding-top: 150px;
      width: 100%;
      height: 100%;
      display: flex;
    }

    .column {
      float: left;
      width: 50%;
    }

    canvas {
      position: absolute;
      top: 0;
      left: 0;
    }
  </style>

</head>

<body>
  <div class="column">
    <div class="row">
      <div class="column" style="background-color:#aaa;">
      <video width="640" height="480" id="inputVideo" autoplay muted playsinline></video>
        <canvas id="overlay" />
      </div>
      <div class="column" style="background-color:#bbb;">
        <canvas id="canvas" style="position: absolute; left: 200px; top: 300px;"></canvas>
      </div>
    </div>
    <div>
      <form id="frm1">
        <label for="kernelNumber">Choose a kernel:</label>
        <select id="kernelNumber"></select>
      </form>
      <button id="create" onclick="generate()">Create file</button>
    </div>
  </div>
  <script>
    var start = 0;
    var end = 63;
    var options = "";
    for (var y = start; y <= end; y++) {
      options += "<option value =" + y + ">" + y + "</option>";
    }
    document.getElementById("kernelNumber").innerHTML = options;

    async function generate() {
      var data_final;
      var data = Promise.resolve(await faceapi.nets.ssdMobilenetv1.getConvLayer());
      data.then(vals => {
        var blob = new Blob([vals], { type: "text/plain;charset=utf-8" });
        saveAs(blob, "output.txt");
      });
    }
  </script>
</body>

</html>